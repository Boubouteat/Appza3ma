<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Info Display with Bootstrap</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa; /* لون الخلفية */
            font-family: Arial, sans-serif; /* نوع الخط */
        }
        .modal-header {
            background-color: #6f42c1; /* لون رأس النافذة المنبثقة */
            color: white; /* لون النص */
        }
        .btn-purple {
            background-color: #6f42c1; /* لون الزر الأرجواني */
            color: white; /* لون نص الزر */
        }
        .btn-purple:hover {
            background-color: #563d7a; /* لون الزر عند المرور */
        }
        .rounded-circle {
            border: 2px solid #6f42c1; /* إطار الصورة */
        }
        #userDataContainer {
            transition: opacity 0.5s ease; /* تأثير التلاشي عند ظهور البيانات */
            opacity: 0;
        }
        #userDataContainer.show {
            opacity: 1; /* يظهر البيانات */
        }
    </style>
</head>
<body>

<!-- User Data Display -->
<div class="container mt-4" id="userDataContainer">
    <h2 class="text-center">Welcome, <span id="userName"></span>!</h2>
    <img id="userPhoto" src="" alt="User Photo" class="rounded-circle mx-auto d-block" style="width: 100px; height: 100px;">
    <p class="text-center mt-3">Username: <strong id="userUsername"></strong></p>
    <p class="text-center">ID: <strong id="userId"></strong></p>
</div>

<!-- Modal for Join Telegram Channel -->
<div class="modal fade" id="joinModal" tabindex="-1" aria-labelledby="joinModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="joinModalLabel">Borhane Message</h5>
      </div>
      <div class="modal-body">
        لتمكنك من فتح البوت الخاص بنا، يجب عليك أولاً الانضمام إلى قناتنا على تلجرام. إذا كنت قد انضممت بالفعل، يرجى التحقق من القناة ودعمنا.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" id="checkButton">افحص</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Maintenance Message -->
<div class="modal fade" id="maintenanceModal" tabindex="-1" aria-labelledby="maintenanceModalLabel" aria-hidden="false">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="maintenanceModalLabel">Borhane Message</h5>
      </div>
      <div class="modal-body">
        البوت في الصيانة حالياً. يرجى العودة لاحقاً.
      </div>
    </div>
  </div>
</div>

<!-- Modal for Open App -->
<div class="modal fade" id="openModal" tabindex="-1" aria-labelledby="openModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="openModalLabel">Borhane Message</h5>
      </div>
      <div class="modal-body">
        يمكنك الآن فتح البوت الخاص بنا! يحتوي على ميزات مثل تنظيم البوتات الخاصة بك، مما يسهل الوصول إليها وتجنب فقدان أي بوت خلال اليوم.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-purple" id="openButton">Open App</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const botUnderMaintenance = false; // Set to true if bot is under maintenance

    function showJoinModal() {
        const joinModal = new bootstrap.Modal(document.getElementById('joinModal'));
        joinModal.show();
        
        document.getElementById('checkButton').addEventListener('click', function() {
            window.open("https://t.me/wgoRSZPpeiphY2Jk", '_blank');
            joinModal.hide();
            showOpenModal();
        });
    }

    function showOpenModal() {
        const openModal = new bootstrap.Modal(document.getElementById('openModal'));
        openModal.show();

        document.getElementById('openButton').addEventListener('click', function() {
            window.location.href = "https://t.me/miniappscenterbot?startapp=aW52PTIxMDQ4Mw==";
        });
    }

    function showMaintenanceModal() {
        const maintenanceModal = new bootstrap.Modal(document.getElementById('maintenanceModal'));
        maintenanceModal.show();
    }

    // Function to fetch user data from Telegram
    async function fetchUserData() {
        // Here you would typically fetch data from Telegram Bot API
        const userId = "<YOUR_USER_ID>"; // Replace with the actual user ID
        const token = "<YOUR_BOT_TOKEN>"; // Replace with your Telegram Bot token
        const url = `https://api.telegram.org/bot${token}/getChat?chat_id=${userId}`;

        try {
            const response = await fetch(url);
            const data = await response.json();
            if (data.ok) {
                const userData = data.result;
                document.getElementById('userName').textContent = userData.first_name || "User";
                document.getElementById('userUsername').textContent = userData.username || "N/A";
                document.getElementById('userId').textContent = userData.id || "N/A";
                document.getElementById('userPhoto').src = userData.photo_url || "default_photo_url.jpg"; // Replace with a default photo URL if needed
                const userDataContainer = document.getElementById('userDataContainer');
                userDataContainer.classList.add('show'); // إضافة تأثير التلاشي
                userDataContainer.style.display = 'block';
            } else {
                console.error("Failed to fetch user data:", data.description);
            }
        } catch (error) {
            console.error("Error fetching user data:", error);
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        fetchUserData(); // Fetch and display user data
        if (botUnderMaintenance) {
            showMaintenanceModal();
        } else {
            showJoinModal();
        }
    });
</script>

</body>
</html>
